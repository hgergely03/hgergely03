import{t as o,r as m,w as c}from"./writeEffect-08442762.js";import{r as p}from"./index-998a0a51.js";import"./sleep-648bee9f.js";import"./index-3c51c478.js";import"./translations-cbdd51bc.js";import"./preload-helper-650b88c2.js";import"./GridItem-8d35dd39.js";import"./posts-e32a2494.js";import"./IconBase-31fea9dd.js";const f=async(e,t)=>{t.dispatch("done"),await o(typeof t.loop=="number"?t.loop:1500);const n=e.innerHTML.replaceAll("&amp;","&");for(let r=n.length-1;r>=0;r--)n[r]===">"&&(r=n.lastIndexOf("<",r)),e.innerHTML=n.slice(0,r),await o(t.unwriteInterval?t.unwriteInterval:t.interval)};let a=[];const h=e=>{for(;;){const t=m(0,e.length),n=typeof a=="number"&&t!==a,r=Array.isArray(a)&&!a.includes(t);if(e.length===1||r||n)return n&&(a=[]),a.push(t),e[t];a.length===e.length&&(a=a.pop())}},s=async({currentNode:e,text:t},n)=>{await c({currentNode:e,text:t},n);const r=t.replaceAll("&","&amp;");e.innerHTML===r&&await f(e,n),p(e,n.parentElement,i=>{e===i?i.classList.remove("typing"):i.classList.remove("finished-typing")})},I=async(e,t)=>{for(;;)if(t.loop)for(const n of e)await s(n,t);else if(t.loopRandom){const n=h(e);await s(n,t)}};export{I as mode};
