import{t as s,r as m,w as c}from"./writeEffect-31697de8.js";import{r as p}from"./index-a41a30e3.js";import"./sleep-648bee9f.js";import"./index-54028273.js";import"./translations-00efc11f.js";import"./preload-helper-36c16078.js";import"./GridItem-8c77053b.js";import"./IconBase-bf2b5bd3.js";const f=async(e,t)=>{t.dispatch("done"),await s(typeof t.loop=="number"?t.loop:1500);const n=e.innerHTML.replaceAll("&amp;","&");for(let a=n.length-1;a>=0;a--)n[a]===">"&&(a=n.lastIndexOf("<",a)),e.innerHTML=n.slice(0,a),await s(t.unwriteInterval?t.unwriteInterval:t.interval)};let r=[];const h=e=>{for(;;){const t=m(0,e.length),n=typeof r=="number"&&t!==r,a=Array.isArray(r)&&!r.includes(t);if(e.length===1||a||n)return n&&(r=[]),r.push(t),e[t];r.length===e.length&&(r=r.pop())}},o=async({currentNode:e,text:t},n)=>{await c({currentNode:e,text:t},n);const a=t.replaceAll("&","&amp;");e.innerHTML===a&&await f(e,n),p(e,n.parentElement,i=>{e===i?i.classList.remove("typing"):i.classList.remove("finished-typing")})},C=async(e,t)=>{for(;;)if(t.loop)for(const n of e)await o(n,t);else if(t.loopRandom){const n=h(e);await o(n,t)}};export{C as mode};
