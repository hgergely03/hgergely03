import{sleep as b}from"./sleep-648bee9f.js";import{r as f}from"./index-8d3f1c7e.js";import"./index-bdf7da45.js";import"./translations-f31b3cb3.js";import"./preload-helper-5490f6b6.js";import"./GridItem-150b6a65.js";import"./posts-e32a2494.js";import"./IconBase-a68aa371.js";const a=(e,t)=>Math.floor(Math.random()*(t-e))+e,w=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=e.length,r=a(0,t);return e[r]},g=(e,t)=>{const r=t/3;return e.map(()=>a(r,t-100))},H=async(e,t)=>{const r=typeof t.scramble=="number"?t.scramble:3e3;await new Promise(s=>{e.forEach(async({currentNode:m,text:i})=>{let o=i.split("");const p=g(o,r),c=Date.now();for(f(m,t.parentElement,n=>{n.classList.add("finished-typing")});Date.now()-c<r;){const n=a(0,o.length),L=p[n],h=o[n]===" ",l=()=>Date.now()-c;if((()=>l()>=L)()||h)if(!(o[n]===i[n]))o[n]=i[n];else continue;else o[n]=w();const d=o.join("");m.innerHTML=d;const u=d===i,T=t.scrambleSlowdown?Math.round(l()/100):1;if(await b(T),u){s();break}}m.innerHTML=i})}),t.dispatch("done")};export{H as mode};
